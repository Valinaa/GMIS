<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="/static/bootstrap.min.css" th:href="@{/bootstrap.min.css}">
    <script src="/static/jquery-3.5.1.min.js" th:src="@{/jquery-3.5.1.min.js}"></script>
    <script src="/static/bootstrap.min.js" th:src="@{/bootstrap.min.js}"></script>
    <script src="https://cdn.staticfile.org/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
    <style type="text/css">
		/*		
		设置背景图片
		body{
			background: url('') no-repeat 0px 0px;
            background-size: 100% 100%;
		}
		*/
		html,body{
            height: 100%;
            overflow: auto;
        }
		#Adm{
			font-family:serif;
			font-weight: lighter;
			text-align: center;
			font-size: 10px;
		}
		label{
			color: white;
			font-family: sans-serif;
		}
		footer{
			text-align: center;
			font-family: sans-serif;
			position: fixed;
			right: 0px;
			left: 0px;
			bottom: 0px;
			color: #F9C205;
		}
		footer span{
			font-weight: bold;
		}
	</style>
    <title>主界面</title>
</head>
<body>
<!--导航栏引入-->
<div th:replace="allTeacher :: navbarmod"></div>
<div class="jumbotron">
	<div class="container" style="margin-top: 20px;width: 900px;">
    	<p class="h2 text-center">欢迎使用大学生成绩管理系统！</p>
	</div>
</div>
<!--侧边栏引入-->
<div th:replace="allTeacher :: offcanvas"></div>
<!--密码修改功能引入-->
<div th:replace="allTeacher :: updatePassword"></div>
<!--添加考试时生成学生专用考试卡片-->
<div class="container">
	<div class="row">
	<div class="card col-md-4 STU" style="width: 18rem;margin-right: 100px;margin-bottom: 50px" th:each="Exam,it : ${test}" th:if="${it.index} lt 3">
  		<div class="card-body text-center">
    		<h5 class="card-title" style="font-weight: bold;color: skyblue;" th:text="${Exam.eName}">考试名称</h5>
    		<h6 class="card-subtitle mb-2 text-muted"><span style="font-weight: bold">考试时间</span><br>
    			<span th:text="${Exam.time}"></span></h6>
    		<p class="card-text" style="color:red;">你有一个考试需要参加！</p>
			<small style="display: none" th:text="${Exam.eid}">1</small>
    		<a href="#" class="card-link btn btn-outline-warning">点击参加考试</a>
  		</div>
	</div>
	</div>
	<div class="row">
	<div class="card col-md-4 STU" style="width: 18rem;margin-right: 100px;margin-bottom: 50px" th:each="Exam,it : ${test}" th:if="${it.index} gt 2 and ${it.index} lt 6">
  		<div class="card-body text-center">
    		<h5 class="card-title" style="font-weight: bold;color: skyblue" th:text="${Exam.eName}">考试名称</h5>
    		<h6 class="card-subtitle mb-2 text-muted"><span style="font-weight: bold">考试时间</span><br>
    			<span th:text="${Exam.time}"></span></h6>
    		<p class="card-text" style="color:red;">你有一个考试需要参加！</p>
    		<small style="display: none" th:text="${Exam.eid}">2</small>
    		<a href="#" class="card-link btn btn-outline-warning">点击参加考试</a>
  		</div>
	</div>
	</div>
</div>
<!--添加专业考试功能引入-->
<div th:replace="allTeacher :: addExamfr"></div>
<footer>
    <span>CopyRight</span><br>
    <span>Team：</span>重案七组<br>
    <span>Course：</span>Managerment Information Systems<br>
    <span>E-mail：</span>www.EcustCK@163.com
</footer>
</body>
<script>
$(document).ready(function(){
    /*
    执行对主页面信息的个性化
    包括cookie的读取，背景图片等
    */
    {
        var roletype=$.cookie("role");
        switch(Number(roletype)){
            case 1:{
                $("#AdminIn").text($.cookie("admin1"));
                $("#PassIn").text($.cookie("password1"));
                $(".Num1").text($.cookie("name1"));
                $("body").css({"background":"url('img/adm.jpg') no-repeat 0px 0px","background-size":"100% 100%"});
                $("#Roles").text($.cookie("aRole"));
                $(".TEA").hide();
                $(".STU").hide();
                $(".DEF").show();
                break;
            }
            case 2:{
                $("#AdminIn").text($.cookie("admin2"));
                $("#PassIn").text($.cookie("password2"));
                $("#NameQ,.Num1").text($.cookie("tName"));
                $("#SexQ").text($.cookie("tSex"));
                $("#SubQ").text($.cookie("tSubject"));
                $("body").css({"background":"url('img/tea.jpg') no-repeat 0px 0px","background-size":"100% 100%"});
                $("#Roles").text($.cookie("tRole"));
                $(".DEF").hide();
                $(".STU").hide();
                $(".TEA").show();
                break;
            }
            case 3:{
                $("#AdminIn").text($.cookie("admin3"));
                $("#PassIn").text($.cookie("password3"));
                $("#NameQ,.Num1").text($.cookie("name"));
                $("#SexQ").text($.cookie("sex"));
                $("#SubQ").text($.cookie("subject"));
                $("body").css({"background":"url('img/stu.jpg') no-repeat 0px 0px","background-size":"100% 100%"});
                $("#Roles").text($.cookie("sRole"));
                $(".TEA").hide();
                $(".DEF").hide();
                $(".STU").show();
                break;
            }
        }
    }
	/*
    引入密码修改信息
    */
    $("#UpPas").click(function(){
        var ad=$("#AdminIn").text();
        $(".PassAdmin").text(ad);
    });
    $("#addPass").change(function(){
        var ad=$("#AdminIn").text();
        var pa=$("#addPass").val();
        $("#exampleModal4").find("[href]").attr("href","updatePass/"+ad+"/"+pa);
        console.log($("#exampleModal4").find("[href]").attr("href"));
    });
    /*
    添加考试的信息(专业)补全
    */
    $("ul.dropdown-menu").find("button.TEA").click(function(){
        $(".QSt").text($("#SubQ").text());
    });
    $("#Modal5").click(function(){
        $(".QSt").text($("#SubQ").text());
    });
    /*
    引入Questions表
    */
    $("#Ifatab").load("allQuestions #TablePage",function(){
        $("#Ifatab").find(".nono").css("display","none");
    });
    /*
    考试卡片个性化
    */
    $(".card-body").children("a").click(function(){
    	var iD=[];
    	$(".card-body").children("small").each(function(){
    		var val=$(this).text();
    		iD.push(val);
    	});
    	console.log(iD);
    	var x=0;
    	$(".card-body").children("a").each(function(){
    		$(this).attr("href","getQues/Exam"+iD[x]);
	    	console.log($(this).attr("href"));
    		x=x+1;
    	});
	});
	/*
    添加考试表单控制
    */
    $("#exampleModal5").find("a").click(function(){
        $("#Es").val($("#SubQ").text());
        $("#AEform").attr("action","setExam/2");
        console.log($("#AEform").attr("action")+"+"+$("#Es").val());
        console.log($("#AEform").serializeArray());
        $("#AEform").submit();
    });
});
</script>
</html>