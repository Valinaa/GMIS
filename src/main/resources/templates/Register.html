<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="/static/bootstrap.min.css" th:href="@{/bootstrap.min.css}">
    <script src="/static/jquery-3.5.1.min.js" th:src="@{/jquery-3.5.1.min.js}"></script>
    <script src="/static/bootstrap.min.js" th:src="@{/bootstrap.min.js}"></script>
    <style type="text/css">
/*		设置背景图片*/
		body{
			background: url('/img/4.png') no-repeat 0px 0px;
            background-size: 100% 100%;
		}
		html,body{
            height: 100%;
            overflow: auto;
        }
		#Adm{
			font-family:serif;
			font-weight: lighter;
			text-align: center;
			font-size: 10px;
		}
		label{
			color: white;
			font-family: sans-serif;
		}
		header{
			font-family: cursive;
			margin-bottom: 30px;
			margin-top: 20px;
			color: #00BEFF;
		}
		footer{
			text-align: center;
			font-family: sans-serif;
			position: fixed;
			right: 0px;
			left: 0px;
			bottom: 0px;
			color: #F5E5E5;
		}
		footer span{
			font-weight: bold;
		}
	</style>
    <title>欢迎来到注册界面！</title>
</head>
<body>
<header class="text-center"><h1>大学生成绩管理系统<small><a class="btn btn-link" href="Login">切换到登录页</a></small></h1></header>
<div class="container">
    <form class="form-inline" action="" method="post" name="registerForm">
        <div class="row mb-3 justify-content-center">
            <label class="col-md-1 col-form-label" style="width: 105px">用户类型：</label>
            <div class="col-md-2">
                <select id="Sel" class="form-select" name="role">
                    <option selected>请选择您的身份</option>
                    <option value="1">管理员</option>
                    <option value="2">教师</option>
                    <option value="3">学生</option>
                </select>
            </div>
        </div>
        <div class="row mb-3 justify-content-center" style="margin-bottom: 10px">
            <label class="col-md-1 col-form-label" style="width: 105px">用户名：</label>
            <div class="col-md-2">
                <input type="text" id="initAdmin" class="form-control" name="admin" placeholder="请输入用户名" required>
            </div><br>
            <span id="IDrepeat" style="font-size: x-small;font-style: fantasy" class="text-center" th:utext="${Admin}"></span>
        </div>
        <div class="row mb-3 justify-content-center">
            <label class="col-md-1 col-form-label" style="width: 105px">密码：</label>
            <div class="col-md-2">
                <input type="password" class="form-control" name="password" required>
            </div>
        </div>
        <div class="row mb-3 justify-content-center Stu" style="display: none">
            <label class="col-md-1 col-form-label" style="width: 105px">姓名：</label>
            <div class="col-md-2">
                <input type="text" class="form-control" name="name" required>
            </div>
        </div>
        <div class="row mb-3 justify-content-center Tea" style="display: none">
            <label class="col-md-1 col-form-label" style="width: 105px">姓名：</label>
            <div class="col-md-2">
                <input type="text" class="form-control" name="tName" required>
            </div>
        </div>
        <div class="row mb-3 justify-content-center Stu" style="display: none">
            <label class="col-md-1 col-form-label" style="width: 105px">年龄：</label>
            <div class="col-md-2">
                <input type="text" class="form-control" name="age" maxlength=2>
            </div>
        </div>
        <fieldset class="row mb-3 justify-content-center Stu" style="display: none">
            <legend class="col-md-1 col-form-label" style="width: 105px;color: white">性别：</legend>
            <div class="col-md-2">
                <div class="form-check">
                    <label class="form-check-label">男</label>
                    <input class="form-check-input" type="radio" name="sex" value="男" checked>
                </div>
                <div class="form-check">
                    <label class="form-check-label" >女</label>
                    <input class="form-check-input" type="radio" name="sex" value="女">
                </div>
            </div>
        </fieldset>
        <fieldset class="row mb-3 justify-content-center Tea" style="display: none">
            <legend class="col-md-1 col-form-label" style="width: 105px;color: white">性别：</legend>
            <div class="col-md-2">
                <div class="form-check">
                    <label class="form-check-label">男</label>
                    <input class="form-check-input" type="radio" name="tSex" value="男" checked>
                </div>
                <div class="form-check">
                    <label class="form-check-label" >女</label>
                    <input class="form-check-input" type="radio" name="tSex" value="女">
                </div>
            </div>
        </fieldset>
        <div class="row mb-3 justify-content-center Stu" style="display: none">
            <label class="col-md-1 col-form-label" style="width: 105px">学号：</label>
            <div class="col-md-2">
                <input type="text" class="form-control" name="number" minlength=8 maxlength=8 required>
            </div>
        </div>
        <div class="row mb-3 justify-content-center Tea" style="display: none">
            <label class="col-md-1 col-form-label" style="width: 105px">工号：</label>
            <div class="col-md-2">
                <input type="text" class="form-control" name="tNumber" minlength=5 maxlength=5 required>
            </div>
        </div>
        <div class="row mb-3 justify-content-center Stu" style="display: none">
            <label class="col-md-1 col-form-label" style="width: 105px">所学专业：</label>
            <div class="col-md-2">
                <input type="text" class="form-control" name="subject" required>
            </div>
        </div>
        <div class="row mb-3 justify-content-center Tea" style="display: none">
            <label class="col-md-1 col-form-label" style="width: 105px">教授专业：</label>
            <div class="col-md-2">
                <input type="text" class="form-control" name="tSubject" required>
            </div>
        </div>
        <div class="row mb-3 text-center">
            <span id="errMs" style="color:red;font-weight:bold"></span>
        </div>
        <div class="text-center">
            <button type="button" class="btn btn-success DEF">提交</button>
            <button type="button" class="btn btn-success Tea" style="display: none">提交</button>
            <button type="button" class="btn btn-success Stu" style="display: none">提交</button>
            <button type="reset" class="btn btn-danger">重置</button>
            <a href="teacher/allTeacher" style="display:none">进入教师管理系统</a>
        </div>
    </form>
</div>
    <footer><span>CopyRight</span><br>
        <span>Team：</span>重案七组<br>
        <span>Course：</span>Managerment Information Systems<br>
        <span>E-mail：</span>www.EcustCK@163.com</footer>
</body>
<script>
	$(document).ready(function(){
		/*
		根据身份调出对应的表单
		*/
		$("#Sel").change(function(){
			var Selobj=$("#Sel option:selected").val();
			switch (Number(Selobj)) {
				case 1:{
					$(".Stu").hide();
					$(".Tea").hide();
					$(".DEF").show("slow");
					break;
				}
				case 2:{
					$(".DEF").hide();
					$(".Stu").hide();
					$(".Tea").show("slow");
					break;
				}
				case 3:{
					$(".DEF").hide();
					$(".Tea").hide();
					$(".Stu").show("slow");
					break;
				}
				default:{
					alert("请选择身份：管理员，教师或学生！");
					$(".Stu").hide("slow");
					$(".Tea").hide("slow");
					$(".DEF").show("slow");
					break;
				}
			}
		});
		/*
		Ajax检验用户名是否重复
		*/
		$("#initAdmin").change(function(){
			var ad=$("#initAdmin").val();
			$.post("/CheckAdmin",{admin:ad},function(Admin){
				$("#IDrepeat").html(Admin);
			});
		});
		/*
		根据用户类型提交到不同的控制器
		*/
	{
		$("button.DEF").click(function(){
			registerForm.action="RegisCheck1";
			registerForm.submit();
		});
		$("button.Tea").click(function(){
			registerForm.action="RegisCheck2";
			registerForm.submit();
		});
		$("button.Stu").click(function(){
			registerForm.action="RegisCheck3";
			registerForm.submit();
		});
	}
		/*
		丰富重置效果
		*/
	{
		$("[type='reset']").click(function(){
        	$("#errMs").text("-信息已重置-");
        	$("#IDrepeat").empty();
    	});
        var TXT=$("#errMs").html();
        setInterval(function(){
            var TXTnew=$("#errMs").html();
            if (TXT!=TXTnew) {
                $("#errMs").fadeOut(5000,function(){
                    $("#errMs").empty();
                    $("#errMs").fadeIn();
                });
                console.log(TXTnew);
            }
        },500);
    }
	});
</script>
</html>